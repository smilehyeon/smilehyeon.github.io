---
title : "ë§Œë“¤ë©´ì„œ ë°°ìš°ëŠ” react : ê¸°ì´ˆ - 12"
excerpt : "ë¦¬ì•¡íŠ¸ ì•±ì— ìˆ¨ ë¶ˆì–´ë„£ê¸°"
categories : 
    - react
tags : 
    - react
---


<br><br> 
ë¦¬ì•¡íŠ¸ ì•±ì˜ ì™„ì„±ë„ë¥¼ ë†’ì—¬ë³´ëŠ” ì‘ì—…ì„ í•´ë³´ì!!!  

---

<br><br> 

ìš°ì„ , ì²«ë²ˆì§¸ë¡œ ëœë¤ìœ¼ë¡œ ê³ ì–‘ì´ ì´ë¯¸ì§€ë¥¼ ë°›ì•„ì˜¤ëŠ” Open APIë¥¼ ì—°ê²°í•  ê²ƒì´ë‹¤.  
[ê³ ì–‘ì´ open API](https://cataas.com/)  
ìœ„ ë§í¬ë¥¼ í†µí•´ ê³ ì–‘ì´ ì‚¬ì§„ì„ ëœë¤ìœ¼ë¡œ ë°›ì•„ì˜¤ê³ , ê¸€ì”¨ë¥¼ ìœ„ì— ì ì–´ì£¼ëŠ” apië¥¼ ì—°ê²°í•  ê²ƒì´ë‹¤.  
ê·¸ê²ƒì„ ìœ„í•´ì„  fetchë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤.  
[fetchì— ëŒ€í•´ ê¶ê¸ˆí•˜ë‹¤ë©´ í´ë¦­](https://developer.mozilla.org/ko/docs/Web/API/Fetch_API/Using_Fetch)  



``` 
const fetchCat = async (text) => {
  const OPEN_API_DOMAIN = "https://cataas.com";
  const response = await fetch(`${OPEN_API_DOMAIN}/cat/says/${text}?json=true`);
  const responseJson = await response.json();
  return `${OPEN_API_DOMAIN}/${responseJson.url}`;
};

```   

fetchë¥¼ ì“¸ ë•Œ, thenì´ ì•„ë‹Œ asyncì™€ awaitë¥¼ ì‚¬ìš©í–ˆë‹¤.  
ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•´ì„œëŠ” async, awiatê°€ í•„ìš”í•˜ë‹¤.  
[async, awiatì— ëŒ€í•´ ê¶ê¸ˆí•˜ë‹¤ë©´ í´ë¦­](https://joshua1988.github.io/web-development/javascript/js-async-await/)  

<br><br> 

open APIë¥¼ ì´ìš©í•´ì„œ ì´ë¯¸ì§€ë¥¼ ëœë¤ìœ¼ë¡œ ë‚˜ì˜¤ê²Œ í•´ë³´ì!!  



``` 
const App = () => {

  const [counter, setCounter] = React.useState(jsonLocalStorage.getItem("counter"));
  const [mainCat, setMainCat] = React.useState(React.useEffect(() => {
    setInitialCat();
  }, [])); // ì•± ì‹¤í–‰í•˜ìë§ˆì, í•œë²ˆë§Œ ëœë¤ ì´ë¯¸ì§€ë¡œ ë…¸ì¶œ.
  const [favorites, setFavorites] = React.useState(jsonLocalStorage.getItem("favorites") || []);


  async function setInitialCat() { //ì•± ì‹¤í–‰ì‹œ, ì´ˆê¸° ì´ë¯¸ì§€ ëœë¤ ì´ë¯¸ì§€ë¡œ ë…¸ì¶œ.
    const newCat = await fetchCat('First Cat');
    setMainCat(newCat);
  }

  //ìƒëµ,,,

  async function updateMainCat(value) {
    const newCat = await fetchCat(value); //ëœë¤ ì´ë¯¸ì§€
    setMainCat(newCat);// ëœë¤ ì´ë¯¸ì§€ë¡œ ì´ë¯¸ì§€ ë³€ê²½
    const nextCounter = counter + 1;
    setCounter(nextCounter);
    jsonLocalStorage.setItem("counter", nextCounter);
  }
 
 //ìƒëµ...


};
```  

fetchCatì„ ì´ìš©í•˜ì—¬ api í†µì‹ ì„ í†µí•´ ëœë¤ì´ë¯¸ì§€ë¡œ ë°›ì•„ì˜¨ë‹¤  
ê·¼ë°, ì œì¼ ì²˜ìŒ ì•±ì„ ì‹¤í–‰í•˜ìë§ˆì ë³´ì´ëŠ” ì´ë¯¸ì§€ë¥¼ ì„¤ì •í•  ë•Œì—ëŠ” useEffectê°€ í•„ìš”í•˜ë‹¤.  
ì•±ì´ ì‹¤í–‰ë˜ê³ ë‚˜ì„œ ë¬´í•œëŒ€ë¡œ apií†µì‹ ì„ í•˜ê¸° ë•Œë¬¸ì—,  
useEffectë¥¼ ì´ìš©í•´ì„œ ì´ˆê¸° ë”± í•œë²ˆë§Œ ì´ë¯¸ì§€ë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ìˆê²Œë” í•´ì•¼í•œë‹¤.  
ê·¸ë¦¬ê³  mainCat ì´ˆê¸°ê°’ì— useEffectë¥¼ ë„£ì–´ì¤˜ì„œ ì‹¤í–‰ë˜ìë§ˆì ëœë¤ì´ë¯¸ì§€ë¡œ ë…¸ì¶œë˜ê²Œ í–ˆë‹¤.  
ë§Œì•½ ì´ˆê¸°ê°’ì— ë‹¤ë¥¸ ì´ë¯¸ì§€ë¥¼ ë„£ì–´ë†“ê³ , ë°‘ì—ì„œ useEffectë¥¼ ì´ìš©í•´ ëœë¤ì´ë¯¸ì§€ë¡œ ë…¸ì¶œë˜ê²Œ í•˜ë©´,  
ì‹œê°„ì°¨ê°€ ë°œìƒëœë‹¤..ã… _ã…œ  
[useEffectì— ëŒ€í•´ ê¶ê¸ˆí•˜ë‹¤ë©´ í´ë¦­](https://goddaehee.tistory.com/308)  


<br><br> 

ê·¸ ë‹¤ìŒì—ëŠ” ì´ì œ í•˜íŠ¸ì™€ ê´€ë ¨ëœ ë™ì‘ì„ ìˆ˜ì •í•´ë³´ì.  
í•˜íŠ¸ë¥¼ ëˆ„ë¥´ë©´, í•˜íŠ¸ ì•„ì´ì½˜ì— ìƒ‰ì´ ë“¤ì–´ê°€ê²Œ í•  ì˜ˆì •ì´ë‹¤.  
ê·¸ë¦¬ê³  ì¶”ê°€ë¡œ ê°•ì˜ì—ëŠ” ì—†ì—ˆì§€ë§Œ ì•„ì‰¬ìš´ ë¶€ë¶„ì´ ìˆì–´ ê·¸ ë¶€ë¶„ë„ ë³´ì™„í–ˆë‹¤.  
ë°”ë¡œ, í•˜íŠ¸ë¥¼ ì´ë¯¸ ëˆ„ë¥¸ ì´ë¯¸ì§€ëŠ” í•˜íŠ¸ë¥¼ ë˜ ëˆ„ë¥´ë©´ ì¦ê²¨ì°¾ê¸° ë¶€ë¶„ì—ì„œ ì´ë¯¸ì§€ê°€ ì‚­ì œë˜ê²Œ í•˜ëŠ” ê²ƒì´ë‹¤..  
ê·¸ëŸ¼ ì‹œì‘í•´ë³´ì!  

``` 
const MainCard = ({ img, onHeartClick, alredyFav }) => {
  const heartIcon = alredyFav ? "ğŸ’–" : "ğŸ¤"; // ì¦ê²¨ì°¾ê¸°ì— ì´ë¯¸ì§€ê°€ ìˆëŠ”ì§€ ì—¬ë¶€ì— ë”°ë¼ í•˜íŠ¸ ì•„ì´ì½˜ ë°”ë€œ

  return (
    <div className="main-card">
      <img src={img} alt="ê³ ì–‘ì´" width="400" />
      <button onClick={onHeartClick}>{heartIcon}</button> //í•˜íŠ¸ì•„ì´ì½˜ ë…¸ì¶œ
    </div>
  );
};

const App = () => {
  
  //ìƒëµ..

  const [favorites, setFavorites] = React.useState(jsonLocalStorage.getItem("favorites") || []);

  const alredyFav = favorites.includes(mainCat); // ì¦ê²¨ì°¾ê¸°ì— ì´ë¯¸ì§€ê°€ ìˆëŠ”ì§€ í™•ì¸

  //ìƒëµ,,,

  }
  function handleHeartClick() {
    const nextFav = alredyFav ? [...favorites].filter((element) => element !== mainCat) : [...favorites, mainCat] //ì‚¼í•­ì—°ì‚°ìë¥¼ ì´ìš©í•´ì„œ nextFavì— ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ê±°ë‚˜, ì´ë¯¸ì§€ë¥¼ ì¶”ê°€í•¨
    setFavorites(nextFav);
    jsonLocalStorage.setItem("favorites", nextFav);
  }

  return (
    <div>
      <Title>{title}</Title>
      <Form updateMainCat={updateMainCat} />
      <MainCard img={mainCat} onHeartClick={handleHeartClick} alredyFav={alredyFav} /> //alreadyFavë¥¼ propìœ¼ë¡œ ë„˜ê¹€..
      <Favorites favorites={favorites} />
    </div>
  );
};
```  

ì´ë ‡ê²Œ í•˜ë©´ í•˜íŠ¸ë¥¼ ëˆ„ë¥´ëŠ” ê²ƒì— ë”°ë¼ ë™ì‘ì´ ë°”ë€ŒëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤~!!  

<br><br> 

ì ì  ì•±ì˜ ì™„ì„±ë„ê°€ ì˜¬ë¼ê°€ê³  ìˆì–´ì„œ í•˜ëŠ” ë™ì•ˆ ë­”ê°€ ë¿Œë“¯í–ˆë‹¤ ã…ã…  
ê·¸ë¦¬ê³  ë­”ê°€ ì•„ì‰¬ìš´ ë¶€ë¶„ë“¤ì„ ì°¾ì•„ë‚´ì„œ ìŠ¤ìŠ¤ë¡œ ë™ì‘ì„ ì¶”ê°€í•˜ê±°ë‚˜ ê³ ì¹˜ëŠ” ê²ƒë„ ì¬ë¯¸ìˆë‹¹>_<  


